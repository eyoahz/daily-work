# Problem: 浏览器缓存机制(1)对于开发很重要，强缓存的内容能了解多少呢？

*[interview]: start

> 强缓存是指当浏览器发现请求的资源已经被缓存时，在该资源的过期时间之前，直接使用缓存的资源，而不需要去服务器再次请求该资源。

常见的强缓存机制有两种（**Expires** 和 **Cache-Control**都是响应头字段，两者可以共同使用）：

1. Expires：响应头中包含过期时间，浏览器在该时间之前可以直接使用缓存。该字段是一个绝对时间，即服务器时间，表示从该时间点开始，该文件在客户端的缓存数据失效，必须重新向服务器发起请求获取最新的数据。

   存在时间不受浏览器时间影响，容易出现误差。

   ```http
   Expires: Wed, 21 Oct 2021 07:28:00 GMT
   ```

   

2. Cache-Control：响应头中包含缓存控制指令，常见的有max-age和no-cache/max-stale等。

   - max-age：文件被缓存的最长时间，单位是秒，该指令描述的是缓存过期的时间距离请求发起的时间。例如：

     ```http
     Cache-Control: max-age=3600
     ```

     表示该资源在请求发起后，一小时以内可以从缓存获取，而无需再次发送请求。

   - no-cache：表示该资源需要重新验证，与服务器协商后决定是否直接使用缓存资源。例如：

     ```http
     Cache-Control: no-cache
     ```

     表示该资源每次都需要向服务器发送请求，从服务器端验证该资源是否被更新。有时候，即使缓存资源并没有过期，但数据内容可能已被修改，所以需要向服务器发起请求，验证该资源是否发生了变化。

   - no-store：表示该资源不能被缓存，每次请求都必须从服务器获取最新数据。例如：

     ```http
     Cache-Control: no-store
     ```

     在某些场景下，比如银行网站等铭感数据处理，为了避免任何被索引泄漏的可能性，应该使用 no-store 。

   - max-stale: 表示资源可以被缓存的最长时间，即使资源过期了，客户端仍可以在600秒内使用该资源，而不必向服务器发送请求获得新的资源。

     ```http
     Cache-Control: max-stale=600
     ```

     **用于在缓存已经过期的情况下**，允许客户端继续使用缓存资源的时间范围，即允许客户端访问已过期的缓存，缓存过期时间超过max-stale定义的值的资源不能被使用，而小于或等于max-stale定义的值的资源可以被使用.



*[interview]: end
